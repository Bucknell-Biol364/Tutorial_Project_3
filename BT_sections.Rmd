---
title: "BT_sections"
author: "Ben Travis"
date: "2/15/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
if (!require("tidyverse")) install.packages("tidyverse"); library(tidyverse)
if (!require("readr")) install.packages("readr"); library(readr)
if (!require("dplyr")) install.packages("dplyr"); library(dplyr)
```

```{r}
library(readr)
Covid_19<-read_csv("Data/Provisional_COVID-19_Deaths_by_Sex_and_Age.csv")
str(Covid_19)
getwd()
```

## Code for Ranking net Deaths by State

```{r}
library(dplyr)

#Looking at original dataset and ensuring State = coded as a factor
Covid_19$State<-as_factor(Covid_19$State)
nlevels(Covid_19$State)
summary(Covid_19$State)
#54 states, need to remove non-states

#Filter functions (one to be used as an example of != and one to be used as an example of ==)
Covid_19.S<-filter(Covid_19, State != "United States" & State != "District of Columbia" & State != "New York City" & State != "Puerto Rico")
Covid_19.S.T.X.A<-filter(Covid_19.S, Group == "By Total" & Sex == "All Sexes" & `Age Group` == "All Ages")

#ensuring filter process worked
table(Covid_19.S.T.X.A$State)
nlevels(Covid_19.S.T.X.A$State)

#data display
arrange(Covid_19.S.T.X.A,desc(`COVID-19 Deaths`))
```



library(dplyr)
Covid_19.AT.S4.B %>%
  mutate(EC = State %in% c("Alabama", "New York")) -> Covid_19.AT.S4.B


## Code for Visualizing "do older people have higher death rates than younger people?"
```{r}
library(dplyr)
Covid_19$`Age Group`<-as.factor(Covid_19$`Age Group`)
#age group = factor

Covid_19 %>%
  filter(State == "United States") %>%
  filter(Sex == "All Sexes") %>%
  filter(Group == "By Total") %>%
  summarize(State, Sex,`Age Group`, `COVID-19 Deaths`) -> Covid_19.Deaths.by.Age
#Isolates total Covid deaths in the country regardless of sex in its own Data set (filter and sumarize function example)

table(Covid_19.Deaths.by.Age$`Age Group`)


```



```{r}
sum(Covid_19.S.T.X.A$`COVID-19 Deaths`)
# All state total deaths from "by total" time catagory

Covid_19.S %>%
  filter(Sex == "All Sexes") %>%
  filter(Group == "By Year") %>%
  filter(`Age Group` == "All Ages") %>%
  summarize(State, Sex,`Age Group`, `COVID-19 Deaths`) ->Covid_19.Deaths.byY

  sum(Covid_19.Deaths.byY$`COVID-19 Deaths`)


```









